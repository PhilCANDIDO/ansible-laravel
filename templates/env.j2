# Laravel Environment Configuration
# Generated by Ansible - Customize as needed

APP_NAME="{{ laravel_app_name | default('Laravel') }}"
APP_ENV={{ laravel_app_env | default('production') }}
APP_KEY={{ laravel_app_key | default('') }}
APP_DEBUG={{ laravel_app_debug | default('false') }}
APP_TIMEZONE={{ php_timezone | default('UTC') }}
APP_URL={{ laravel_app_url | default('http://localhost') }}

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# Database Configuration
DB_CONNECTION={{ laravel_app_db_connection | default('mysql') }}
DB_HOST={{ laravel_app_db_host | default('127.0.0.1') }}
DB_PORT={{ laravel_app_db_port | default('3306') }}
DB_DATABASE={{ laravel_app_db_database | default('laravel') }}
DB_USERNAME={{ laravel_app_db_username | default('root') }}
DB_PASSWORD={{ laravel_app_db_password | default('') }}

# Session Configuration
SESSION_DRIVER={{ laravel_session_driver | default('database') }}
SESSION_LIFETIME={{ laravel_session_lifetime | default('120') }}
SESSION_ENCRYPT={{ laravel_session_encrypt | default('false') }}
SESSION_PATH={{ laravel_session_path | default('/') }}
SESSION_DOMAIN={{ laravel_session_domain | default('null') }}

# Cache Configuration
CACHE_STORE={{ laravel_cache_store | default('database') }}
CACHE_PREFIX={{ laravel_cache_prefix | default('laravel_cache_') }}

# Queue Configuration
QUEUE_CONNECTION={{ laravel_queue_connection | default('database') }}

# Redis Configuration
{% if enable_redis | default(false) %}
REDIS_CLIENT=phpredis
REDIS_HOST={{ laravel_app_redis_host | default('127.0.0.1') }}
REDIS_PASSWORD={{ laravel_app_redis_password | default('null') }}
REDIS_PORT={{ laravel_app_redis_port | default('6379') }}
REDIS_DB=0
{% else %}
REDIS_CLIENT=null
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
{% endif %}

# Mail Configuration
MAIL_MAILER={{ laravel_mail_mailer | default('log') }}
MAIL_HOST={{ laravel_mail_host | default('127.0.0.1') }}
MAIL_PORT={{ laravel_mail_port | default('2525') }}
MAIL_USERNAME={{ laravel_mail_username | default('null') }}
MAIL_PASSWORD={{ laravel_mail_password | default('null') }}
MAIL_ENCRYPTION={{ laravel_mail_encryption | default('null') }}
MAIL_FROM_ADDRESS={{ laravel_mail_from_address | default('"hello@example.com"') }}
MAIL_FROM_NAME={{ laravel_mail_from_name | default('"' + (laravel_app_name | default('Laravel')) + '"') }}

# Logging Configuration
LOG_CHANNEL={{ laravel_log_channel | default('stack') }}
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL={{ laravel_log_level | default('error') }}

# Broadcasting Configuration
BROADCAST_CONNECTION={{ laravel_broadcast_connection | default('log') }}

# Filesystem Configuration
FILESYSTEM_DISK={{ laravel_filesystem_disk | default('local') }}

# AWS Configuration (if using S3)
AWS_ACCESS_KEY_ID={{ laravel_aws_access_key_id | default('') }}
AWS_SECRET_ACCESS_KEY={{ laravel_aws_secret_access_key | default('') }}
AWS_DEFAULT_REGION={{ laravel_aws_default_region | default('us-east-1') }}
AWS_BUCKET={{ laravel_aws_bucket | default('') }}
AWS_USE_PATH_STYLE_ENDPOINT={{ laravel_aws_use_path_style_endpoint | default('false') }}

# Vite Configuration
VITE_APP_NAME="${APP_NAME}"

# Security Configuration (Production recommended values)
{% if laravel_app_env == 'production' %}
# Security headers and HTTPS enforcement
FORCE_HTTPS=true
SECURE_COOKIES=true
SAME_SITE_COOKIES=strict

# Session security
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict
{% else %}
# Development settings
FORCE_HTTPS=false
SECURE_COOKIES=false
SAME_SITE_COOKIES=lax

SESSION_SECURE_COOKIE=false
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax
{% endif %}

# Custom Application Variables
{% for var in laravel_custom_env_vars | default([]) %}
{{ var.key }}={{ var.value }}
{% endfor %}